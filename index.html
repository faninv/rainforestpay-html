<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>
    function loadPaymentScript(isProd, sessionKey, payinConfigId) {
      const script = document.createElement('script');
      script.type = 'module';
      script.src = isProd 
        ? 'https://static.rainforestpay.com/payment.js'
        : 'https://static.rainforestpay.com/sandbox.payment.js';

      script.onload = function() {
        addPaymentElement(sessionKey, payinConfigId);
      };
      
      document.head.appendChild(script);
      sendLogMessage('loadPaymentScript done. script.src ' + script.src);
    }

    function addPaymentElement(sessionKey, payinConfigId) {
      sendLogMessage('initializePaymentForm sessionKey ' + sessionKey);
      sendLogMessage('initializePaymentForm payinConfigId ' + payinConfigId);

      const paymentElement = document.createElement('rainforest-payment');
      paymentElement.id = 'pay-form';
      paymentElement.setAttribute('session-key', sessionKey);
      paymentElement.setAttribute('payin-config-id', payinConfigId);
      paymentElement.setAttribute('allowed-methods', 'CARD');
      paymentElement.setAttribute('style-button-color', '#212121');
      paymentElement.setAttribute('style-button-border-radius', '90rem');
      paymentElement.setAttribute('style-font-family', "'ProximaNova',sans-serif");

      document.body.appendChild(paymentElement);

      sendLogMessage('addPaymentElement done');
    }

    function initializePaymentForm(sessionKey, payinConfigId) {
      const paymentElement = document.getElementById('pay-form');
      if (sessionKey) {
        paymentElement.setAttribute('session-key', sessionKey);
      }
      if (payinConfigId) {
        paymentElement.setAttribute('payin-config-id', payinConfigId);
      }
    }
  </script>
</head>
<body>
</body>
</html>